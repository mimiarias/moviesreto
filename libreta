!git --version
!pip install Streamlit
!streamlit --version
!pip install firebase-admin
!git clone https://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@github.com/mimiarias/moviesreto.git
cd moviesreto
!ls -la
!git remote -v
import firebase_admin
from firebase_admin import credentials, firestore
import pandas as pd

path = "/content/moviesreto/"

cred = credentials.Certificate(path + "movies-reto-tlg-firebase.json")
firebase_admin.initialize_app(cred)

db = firestore.client ()
doc_ref = db.collection(u'movies') #Set the name of the Collection
#Import data
df = pd.read_csv(path + 'movies.csv')
tmp = df.to_dict(orient='records')
list(map(lambda x: doc_ref.add(x), tmp))  
!pip install toml
!mkdir .streamlit
import toml

output_file = ".streamlit/secrets.toml"

with open("movies-reto-tlg-firebase.json") as json_file:
  json_text = json_file.read()

config = {"textkey" : json_text}
toml_config = toml.dumps(config)

with open(output_file, "w") as target:
  target.write(toml_config)
!ls -la
!ls -la .streamlit/
!cat .streamlit/secrets.toml
